### **클로저**

- 어떤 함수 A에서 선언한 변수 a를 참조하는 내부함수 B를 외부로 전달(return, 콜백 함수)한 경우, A의 실행 컨텍스트가 종료된 이후에도 변수 a가 사라지지 않는 현상이다.

**클로저가 가능한 이유**

- 콜스택에 A 실행 컨텍스트가 있고 그 위에 B 실행 컨텍스트가 있다.
- A 함수에는 a라는 변수가 선언되어 있다. 즉, A라는 함수의 실행 컨텍스트의 **`Lexical Environment`** 의 프로퍼티에는 변수 a가 존재한다.
- B 함수는 **`Lexical Environment`** 의 **`outerEnvironmentReference`** 를 통해 A 함수에 선언된 a 변수에 접근할 수 있다. 이를 통해 B 함수가 a의 값을 변경하는 등의 동작을 할 수 있다.
- 이때 B 함수를 **`return`** (또는 콜백 함수를 이용하여 외부에 전달)하여 A 함수 외부에 전달하면, B 함수는 아직 실행 중이므로 A 함수의 a를 기억한다. 따라서 a를 기억하고 있는 존재가 있으면 a는 GC의 대상이 아니므로 제거되지 않는다.
- 이로 인해 B가 a를 기억하는 현상을 클로저라고 한다.

### **메모리**

- 클로저는 참조 카운터가 0이 되지 않게 설계하여 GC가 되지 않기 때문에 메모리를 소모할 수 있다.
- 때문에 클로저를 사용할 때는 조심해야 하며 사용이 끝났다면 참조를 끊어야 한다.

### **콜백 함수 내부에서 외부 데이터 사용**

- 대표적으로 **`addEventListener`** 의 콜백 함수를 사용할 때 **클로저**가 사용된다.
- **`addEventListener`** 의 콜백 함수의 첫 번째 인자는 **`event 객체`** 이다. 따라서 콜백 함수는 호출 시점에서 인자, **`this`** 의 제어권을 가진다.
- 인라인으로 작성하지 않는다면 **`bind`** 나 **클로저**를 사용하여 외부 함수를 콜백 함수로 작성할 수 있다.
- 클로저를 이용하여 외부 함수를 작성할 때는 **매개변수를 클로저한 고차 함수**를 콜백 함수로 지정한다.

### **정보 은닉**

- 함수의 지역변수 및 내부함수를 생성한다.
- 외부에 접근권한을 주고자 하는 대상을 참조형 데이터로 **`return`** 한다. 이렇게 반환된 데이터는 **공개 맴버**가 되며, 그 외에 내부 함수에 작성된 값은 **비공개 맴버**가 된다.

### **부분 적용 함수**

- n개의 인자를 받는 함수에 미리 m개의 인자만 넘겨 기억시켰다가, 나중에 (n-m)개 인자를 넘기면 비로소 원래 함수의 실행 결과를 얻을 수 있게끔 하는 함수이다.
- **`bind`** 메서드의 실행 결과가 부분 적용 함수이다. (this 바인딩을 제외한다면)

### **커링 함수**

- 여러 개의 인자를 받는 함수를 **하나의 인자만 받는 함수**로 나눠서 순차적으로 호출될 수 있게 체인 형태로 구성하는 것이다.
- 커링 함수에 있는 각 단계에서 받는 인자들은 모두 마지막 단계에서 참조하므로 GC되지 않고 메모리에 쌓인다. 마지막 호출로 실행 컨텍스트가 종료되면 한꺼번에 제거된다.
- **커링 함수는 한 번에 하나의 인자만 전달하는 것**을 원칙으로 하며, 화살표 함수로 작성한다면 편리하다.